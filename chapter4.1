---
title: "chapter4.1"
output: html_document
---
```{r exercise 4.1}
customerExperience <- c('very happy','very happy','satisfied','satisfied','satisfied','very happy','bad','bad','satisfied','satisfied','bad','happy','happy','very happy','happy','happy','satisfied','very happy','very happy','satisfied','satisfied','very happy','satisfied','bad','very happy','very bad','very happy','bad','bad','very bad')
customerExperience_fct = factor(customerExperience)
customerExperience_fct_factor_order <- factor(customerExperience,levels = c("very bad","bad","satisfied","happy","vey happy"),ordered = T)
```

```{r}exercise 4.2
subsidiaries <- list()
subsidiaries$boston <- c("2020 Oct. 13 15:00:00", "2019 Apr. 10 09:30:00") # boston time zone
subsidiaries$mykonos <- c("14 Jan., 2021 03:27:00", "8 Aug., 2020 11:20:00") # mykonos time zone
one_subsidiaries <- lubridate::ymd_hms(subsidiaries$boston,tz = "Asia/Dacca")
another_subsidiaries <- lubridate::dmy_hms(subsidiaries$mykonos,tz = "Asia/Dacca")
c(one_subsidiaries,another_subsidiaries) -> sum_subsidiaries
lubridate::with_tz(
  sum_subsidiaries ,
  tz = "Asia/Dacca"
) -> final_answer
```


```{r} 
# exercise 4.5
participations <- 
list('session 3',c("session 1", "session 2", "session 3"),'session 3',c("session 2", "session 1"),c("session 3", "session 1"),c("session 3", "session 2", "session 1"),'session 2','session 1',c("session 2", "session 1", "session 3"),c("session 3", "session 1", "session 2"))
participations1 <- unlist(participations)
table(participations1)
```

```{r}
my_feature_different_from_other <- list(
  "height" = list(181,191,201),
  "weight" = 70,
  "face" = "handsome"
)# binding+regular name + element name + attibute +name call
```


```{r}
example1 <- c("John", "Mary", "Bill")
# goal (a,b,c,d,e,) adding two people in the list
example1 [[4]] <- "Kevin"
example1[[5]] <- "Tim"
example1[c(4,5)] <- c("Kevin","Tim")
example1
```
```{r}
example3 <- c("John", "Mary", "Bill", person4="Jack")

## inclusive approach
example3[c(1, 2, 3)]

## exclusive approach
example3[-c(4)]

## multiple exclusion is possible
example3[-c(1, 4)] # negative sign can only use on the numaric cannot use on character
```


```{r}
example1 <- c("John", "Mary", "Bill")
# binding the element value with the element name that means the object with the element name won't add the new element name but will increase the element value 
# if we have to increase the 'element name we need to retrieve the position out and give it element name and value like the underneath example 
# so if we need to increase name and value the name haveto be with retrieval side
example1 [[4]] <- "person4" 
example1
```
```{r}
1:3 # the same as # : 2is mean 遞增or遞減
seq(from=1, to=3, by=1) # from 1 to 3 increase by 1 # seq 等差遞增or遞減  
```


```{r}
# retrieve an non-existing element name "person4"
# example value become => (j,m,b,k) adding ken at position 4
example1[[4]] <- "Ken" # can use element name to replace the position 4
example1[["person4"]] <- "Ken"
# retrieve two non-existing element positions
```


```{r}
numeric
# declaration means bind a name with no value but its value type ==>adding value in this declaration(an empty object)
```

```{r}
course1 <- 
  list(
    name="programming for data science",
    credit=2
  )
```


# there is a special method to remove in list  that there are not in other methods 
# the method is null(with capital letter) bind with the value name 


```{r}
#[row , col] an extraction from data frame and the structure of the retrieval value = the source structure 
# also can replace the value but the structure of the  replacement value need to be the same as the source (object)
```

# as function can convert the class object also can turn atomic vector into unlist 
# unlist() function 能使 lsit 變為 atomic vector
# r 獨特之功能 能接受向量直接運算 
# print 輸出結果
# sum 總和
# which apply to only the logical vector can tell the position of true
# [] can use logical vector to pick your value [T] 要選 [F] 不要選
# as numeric(datetime or factor) will show hoe R stores these values
#{} programming block can execute the command in the block 可以呈現出演算邏輯 
# saveRDS(object_nmae,file:"filename.RDS")
```{r} 


```{r}
#exercise 4.6
factor(c('參','貮','貮','貮','壹','貮','參','貮','參','參'), levels=c('壹','貮','參')) -> number1
class(number1)
typeof(number1)
as.numeric (number1) -> number2
sum(number2)
```

```{r}
# exercise 4.7
factor(c('۶','۹','۸','۹','۶','۸','۸','۵','۹','۹'),levels = c("۵", "۶", "۷", "۸", "۹")) -> fct1
as.numeric (fct1) -> conversion
sum(conversion) -> answer
```

# grade 代表從哪裡選取標的(retrieve from)
# [pick] 選取標的的條件

```{r}
grades <- c(51,70,79,78,67,74,80)
# same 7 student's gender
gender <- c('female','female','male','male','female','male','male')
pick <- grades > 70
gender[pick]
```

```{r}
dataSet1 <- 
  data.frame(
    school_id = c("001", "002", "003", "004"),
    course1_grade=c(55, 83, 92, 73),
    course2_grade=c(50, 88, 72, 77)
  )
```

```{r}
pick <- dataSet1$course1_grade >=80 # conditional retrieval means when the value meets the command(condition) the R would retrieve the value 
dataSet1[[3]][pick] 
```
```{r}
names(dataSet1)
```
```{r}
dataSet1[pick, ] # will keep all the columns in dataSet1
# same as
subset(dataSet1 , course1_grade >=80)
```

```{r}
gender = c('Female','Male','Male', 'Female')
age = c(28,41,42,33)
residence = c('South','South','North', 'North')
color=c("yellow", "pink", "blue", "green")
```

```{r}
# For those who are "Male": 
pick$male <- gender == "Male"
print(pick$male)

# For those who lives in the "South:
pick$south <- residence == "South"
print(pick$south)
```

```{r}
# For those who are "Male" 
#   AND
#   lives in the "South",
pick$male_south <- 
  pick$male & pick$south

print(pick$male_south)

# what are their ages?
age[pick$male_south]
```



```{r}
pick$maleXOsouth <-
  xor(pick$male, pick$south)

print(pick$maleXOsouth)
```

```{r}
color[pick$male]
color[pick$south]
color[pick$maleOsouth]
color[pick$maleXOsouth]
```



```{r}
# For those who are "Male" 
#   OR
#   lives in the "South",
pick$maleOsouth <- 
  pick$male | pick$south

print(pick$maleOsouth)

# what are their ages?
age[pick$maleOsouth]
```

# & and / | or / xor / ! not
# any()-> 有任何...... all()-> 全是.....






# function sort:在factor()中，排列element value or 使用table()，能將factor中，element value的個數(value number)， 由小到大
# sort function 中，有decreasing function(遞減) ， 由大到小的排列 
# x |> f() = f(x) means use x to do f() 



```{r}
hobby = c(
  'sport, reading, movie',
  'sport',
  'movie, sport, reading',
  'movie, Reading',
  'sport')
```

# stringr function -> str_detect 是辨識patter(樣子形狀) 
# stingr::coll -> 能夠使r跳脫大小寫形體的辨識(定義patter)
```{r}
# any one likes to read
stringr::str_detect(hobby, "reading") # 4th is FALSE
stringr::str_detect(hobby, stringr::coll("reading", ignore_case = T)) # 4th is TRUE
```



```{r}
dataSet <- list(
  list(
    gender="male", height=178, age=32,
    children=list(
      list(gender="male", age=5),
      list(gender="male", age=0))
  ),
  list(
    gender="female", height=166, age=30,
    children=list(
      list(gender="female", age=3))
  ),
  list(
    gender="male", height=170, age=42,
    children=list(
      list(gender="male", age=10),
      list(gender="female", age=8))
  ),
  list(
    gender="male", height=188, age=22,
    children=list()
  ),  
  list(
    gender="male", height=172, age=52,
    children=list(
      list(gender="female", age=25),
      list(gender="female", age=23))
  ),
  list(
    gender="female", height=160, age=42,
    children=list(
      list(gender="female", age=11))
  )
)
```



```{r}
analysis <- list()
analysis$number_of_children <- list()

analysis$number_of_children[[1]] <-length(dataSet[[1]]$children)
analysis$number_of_children[[2]] <-length(dataSet[[2]]$children)
analysis$number_of_children[[3]] <-length(dataSet[[3]]$children)
analysis$number_of_children[[4]] <-length(dataSet[[4]]$children)
analysis$number_of_children[[5]] <-length(dataSet[[5]]$children)
analysis$number_of_children[[6]] <-length(dataSet[[6]]$children)
```



```{r}
analysis$number_of_children <- list()
analysis$number_of_children <- vector("list", length=6)

analysis$number_of_children[[1]] <-length(dataSet[[1]]$children)
analysis$number_of_children[[2]] <-length(dataSet[[2]]$children)
analysis$number_of_children[[3]] <-length(dataSet[[3]]$children)
analysis$number_of_children[[4]] <-length(dataSet[[4]]$children)
analysis$number_of_children[[5]] <-length(dataSet[[5]]$children)
analysis$number_of_children[[6]] <-length(dataSet[[6]]$children)

```


# .x pattern是將重複樣態的結構，帶入不同數值，以.x代表這些不同數值，然後指定數值範圍(seq_along() -> 正確的起始點)重複帶入

```{r}
analysis <- list()
analysis$number_of_children <- vector("list", length=6)
for(.x in c(1, 2, 3, 4, 5, 6)){
  # .x-pattern
  analysis$number_of_children[[.x]] <-length(dataSet[[.x]]$children)
}

class(analysis$number_of_children) # a list
```



```{r}
dataSet1 <- 
  data.frame(
    team=c('team 2','team 3','team 1','team 2','team 3','team 1','team 2','team 1','team 3','team 2','team 3','team 1','team 3','team 1','team 2'),
    entranceYear = c(100,100,101,100,100,100,101,100,100,101,101,100,101,100,100),
    grade=c(98,95,76,87,67,83,84,94,70,64,99,77,89,62,65)
  )
```
# split 基於某個vector把object拆成所求的樣態
```{r}
split(dataSet1, dataSet1$team) -> grouped_dataset1

View(grouped_dataset1)
```


```{r}
dataSet3 <-
  data.frame(
    dates = c("2016-11-15", NA, NA, "1997-05-07", "1995-08-25", "2002-09-20", NA, NA, NA, "1995-07-16", "2011-06-22"),
    grades = c(29, 53, 26, 27, 55, 69, NA, NA, 63, NA, 56),
    genders = c("Male", "Female", "Male", "Male", "Female", "Female", NA, "Male", "Male", "Female", "Female"),
    majors = c("economics", "economics", NA, "economics", "economics", "economics", "economics", "statistics", "law", "economics", "law")
  )
```


```{r}
# class check
class_check <- vector("integer", length(dataSet3))
for(.x in seq_along(dataSet3)){
  class_check[[.x]] <- class(dataSet3[[.x]])
}
names(class_check) <- names(dataSet3)
class_check
```


```{r}
# NA check
na_check <- vector("integer", length(dataSet3))
for(.x in seq_along(dataSet3)){
  na_check[[.x]] <- sum(is.na(dataSet3[[.x]]))
}
names(na_check) <- names(dataSet3)
na_check
```


```{r}
class_check <- check_class(dataSet3)
na_check <- check_na(dataSet3)
```


```{r}
# checking blocks for dataSet3
class_check <- {
  # class check
  class_check <- vector("integer", length(dataSet3))
  for(.x in seq_along(dataSet3)){
    class_check[[.x]] <- class(dataSet3[[.x]])
  }
  names(class_check) <- names(dataSet3)
  class_check # the last executed line
}


na_check <- {
  # NA check
  na_check <- vector("integer", length(dataSet3))
  for(.x in seq_along(dataSet3)){
    na_check[[.x]] <- sum(is.na(dataSet3[[.x]]))
  }
  names(na_check) <- names(dataSet3)
  na_check # the last executed line
}
dataSet4 = data.frame(
  x = c(6,10,10,6,10,6,NA,NA,3,7),
  y = c(2,3,6,6,8,2,8,6,8,3)
)


check_na <- function(){
  # NA check
  na_check <- vector("integer", length(dataSet3))
  for(.x in seq_along(dataSet3)){
    na_check[[.x]] <- sum(is.na(dataSet3[[.x]]))
  }
  names(na_check) <- names(dataSet3)
  na_check # the last executed line
}
# function definition
check_class <- function(){...}
check_na <- function(){...}

# a long program

```




